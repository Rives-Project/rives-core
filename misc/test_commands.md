# Commands to test the App

## Interacting with WA

### Mutations

First set one of the inputs

- Snake insert cartridge

```shell
input=0x36b24e6f0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000100068737173030000000000000000000200000000000400110050000100040000004800000000000000fc08000000000000f408000000000000ffffffffffffffff5808000000000000c208000000000000ee08000000000000fffffffffffffffffd377a585a0000016922de3603c0c302ff0321010a000000f7a61299e001fe013b5d003d8280191b9ae8b8a76e26775d26cf2b48a4875b3c23c1bc52d95c1b242271f410c673f3863641a38fe54257d507ccc074061887d1e46050c4ed6743bb17c51d87b686348ba0a0cf00a4c55ef988e2f1683e8225864e8234d2671db11b3f90bca35a6ce01c6f959fd480486eca88100272a1109d69cc117af09af11229b6fd63a4b6efdf1ef2ae31318e6ed87c5670110cd0fee7d57b871529a1303cac1e0a5717e372b34ec69c53e8edbf0a12617bd6c12e343e2a09194eeef6936d7146b770053ace2d97b1c453e3126e45591209f0d614ebefe9780f6ab734156382848b3c73f406a8a2d6fbe4e2e12c3005dd2cfd33127c8828c0e530637ea0cf5be454468dd0adc945133222e882d21677dd0c781428c63cc83a595efb3a2e18631a07aa48edc6396877087e960ec5d957930905c011f4f3be4ded694600000000b6f39c340001d702ff0300008213ed6a3e300d8b020000000001595afd377a585a0000016922de3603c0c30cf81721010a000000a1cc84c8e00bf7063b5d003f914584683d89a6da8ae187795daee97ef623300a79fd319a4ccc07d1a7daeddfaedde3dd0cae4e51a19b540a32874cdbf463868a1ac4b44980a3001945c853749e4ba034fb67df1ba10069fc29cc1eab79a7c3c98b674f8d4cc72fe94a69a300d212aeb18f0e5451cd82d521e3866a5d45f6d88a91b230a7b2053ea4748b7c43e2ba390ea1a05d0e998094ff28610b777b06e0b98da7f424cf06d6e78e5dd3208f7ecf76fd01782d65bc501676ae0e56991fddc688b0df2ca608f94fd566ae528c1b7f70c0a54d1d45c3c127a036a27e51cecbc210343d37f2d85b6e2986ee4fce36a54f07970c090a8c98124246a55f5b01d602ea47884efd65da0fb3554a5423c3ab1bf474b1c1056f2524bb58ca0324df0c685f6156cf7c63bbb871d8fb1b64b18eb2955704000d56956799408f93ef2d668b48d3582103284e56a55ce599899a2e899f6f879860c8fcb6a86b7aba1bb2eba0a87f0e239238417f22ec710a62571707a5bb49bf69aa316988598f95d4faebcfd887c3004643694fc298e091cf2c121cb335359b07e91c30a28aff4c08aa6d968fa516531ea22e4c6046deb0782060f707490bedfc7e3b4a861a71c30742bdee8751a9728794c0be7ad3ce1714bb8ae49a08a0f7573acb459ccb170bb521420d98ead9ecd95437d7beed4b09f0d105d28e1b6cdb6da8a162867695e56a6dc8395a5b5b8e6de4113245a1fb9e7f5c79613f2f6168d5bb4a17872e1d46b6f9db41257ccd7116839f4e7728bcd8755c0462eecea12e869b044c0899cd2ffda27563414829ae6e74a3a0c48b5086632ca3d29d136d024a1bd6e0b3392e2e5508b8d3c630ca4587fa02e5286963ebe11050eb7ec36164b3b5e7ec69ec5324d571fe422a78314e07193743b0bde7c75f868f442ef9aa6307d7d6cdb7210ae369f3e1f4abdff2832ade2bfeb8caa18905479d9e5f7e3a7d1dcbad3f14fd0b6836d85b6c7a2ad0c4039251b600e9e9ed3be93318dd7fe7a6d3be8bb92a51bafd2f39630849ad732d80c754dc29c36a7b203c035a7f4256f16f2c5d19c881c895bf624b0b2b600fc37654c2c728759be193a9aa344471b281730ad67c421e5acb1f409851186af9f19fb6998d916bcd9a5b9b1dbc8fb05790b25d703a84bb0bd26ac85e17b1b36b96577d70ec83517e4bc7492f96f4553ebd8b2f660652d1d77b8686aaf4cec40f7eefca0246aa89215b58b270d803888be099ef28f456d6f2fb501724fbb2523dad27aec1c8d40c576a4650617270d8d0e5fc3487be55625f1bfd2b1103eb785fd6064e3325978cc0645570d887dd46fed0aa162470319af1a1d759186c5ddbee3e7181b95a8664fe40c2be7d7ec2e2f301d6fba9de7f43f86bfb3eda810272f112c1b78f2b2244f2fcab0fb6bcdf8fa73c86b0c1cae981b9bef6dc7cd4933c79e119cad2fc40d614343799f47ac20978679f57486bbfe90497e76d20eaa9d6c1c61ea4fb9e67814b8d2296b00c8a5a9b248cd9fa61b1413d8ef326874250c428bb646ca92673393320810229e5f9bbfa50bfebc1ae6933f4ec18f23749d9e2d4e681ecdf196e8c87e46259c34ddeb3b3bff4caf18cee98886244eae3319a0b719052f6aa51f79cb15199192f03ead24ce653a56a819bc2e5c729f6aa742012af0a7ba9820e27554c674d8a8b22e52e572bdf9481b9a17bdb64c12badfc2bdc6082558fbcc968973b38b3f88f0ea7646b40feddf23c96e6ad8957ab6c744d7ed474cc3b725272051723e51c08c63c0b86e1a1564508457c6676cff0fd872198801b25ac235c5c8da20a294ece21df83d1a081fbbc8b4bd4838ccbe651705b24d015ddddcc2744d476914e698eb385be8551adb41f899782c8462c9797fdc423b39215e45e9569ddf29a3853c24fbc7f0f8d00cba24a34532a2ae35dce61fc0e3b7c30c704a73cfdf6a910c134b3de70ea7060ef30fcaeb762dbe547511490052fe1970b46e1681c7faf58f2ca6676ef1dd1fbc3a3232e1841b790363fce8f133fac4d64218a90532aed95b38dbd7083c576cf725c6f339118e5a634902f193cd130acfd6e94a70c3b721afbc9b030411301b4e92710ae3d3c29f8da5f3758c0c04a6d20fcc2000d8e08edf3def0e9ff84c62cbbb4b174550b85b5688ca723ba14342afad15e29d5a69b6689d6ec704139737d74278057c41a2953f7c4dfb6007fe7b6270a9fd5b96512aa27f723a003fe3200757c1fd388459e8d196d4af35f476d31f4000038fa335e0001d70cf8170000f69e25533e300d8b020000000001595a68800200a40100000000000000000100000060000000ffffffff00000000ff0100007c0100000200ed01000000000000000002000000dc010000ffffffff00000000f80b00007c0600000100ed0100000000000000000300000000000000020000002d000000040000002a800100000000000000010000000000000002000800696e666f2e6a736f6e2400010002000400736e616b65048000000000ee080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
```

- Snake remove cartridge

```shell
input=0xa850c582907ab088197625939b2137998b0efd59f30b3683093733c1ca4e0a62d638e09f
```

- Snake replay

```shell
input=0x49ee5e36907ab088197625939b2137998b0efd59f30b3683093733c1ca4e0a62d638e09f86e9ebacee2ca072cc896201d11c142fcfda227f91e88765a6e8136006b5882a00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007f01010404910000000300000000000000676866695dcc416ec3400c43513d4a33751cf4fed7edc2718d165a7c52045945d29d5caca2ead6dd575275f3affe6d74fdfb95f2e4f7fae31fe6731f5fb6c1615949641c96783bf5b56a59c684182c5b7c1b71622b5b6c2ce30c55d1be74062d68949797433b13ef6ca5153a3bf30300
```

- Snake create simple scoreboard

```shell
input=0x494fdad8907ab088197625939b2137998b0efd59f30b3683093733c1ca4e0a62d638e09f00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000000673696d706c65000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000573636f7265000000000000000000000000000000000000000000000000000000
```

- Snake scoreboard replay

```shell
input=0xc0b7397ca7a39b72f29718e653e73503210fbb597057b7a1c77d1fe321a1afcff041d4e186e9ebacee2ca072cc896201d11c142fcfda227f91e88765a6e8136006b5882a0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000007f01010404910000000300000000000000676866695dcc416ec3400c43513d4a33751cf4fed7edc2718d165a7c52045945d29d5caca2ead6dd575275f3affe6d74fdfb95f2e4f7fae31fe6731f5fb6c1615949641c96783bf5b56a59c684182c5b7c1b71622b5b6c2ce30c55d1be74062d68949797433b13ef6ca5153a3bf30300
```

- Clean old scoreboards

```shell
input=0x7b75384d
```



Then send the input with:

```shell
sunodo send generic --chain-id=31337 --rpc-url=http://127.0.0.1:8545 \
    --mnemonic-index=0 --mnemonic-passphrase='test test test test test test test test test test test junk'\
    --dapp=0x70ac08179605AF2D9e75782b8DEcDD3c22aA4D0C --input=$input
```

### Queries

List of cartridges (and with filters)

```shell
curl -s "http://localhost:8080/inspect/app/cartridges" | jq -r '.reports[0].payload' | xxd -r -p | jq
curl -s "http://localhost:8080/inspect/app/cartridges?tags=2d&name=nake&tags=action" | jq -r '.reports[0].payload' | xxd -r -p | jq
```

Cartridge info

```shell
curl -s http://localhost:8080/inspect/app/cartridge_info?id=907ab088197625939b2137998b0efd59f30b3683093733c1ca4e0a62d638e09f | jq -r '.reports[0].payload' | xxd -r -p | jq
```

Cartridge binary (could get from graphql with indexer too once inserted)

```shell
curl -s http://localhost:8080/inspect/app/cartridge?id=907ab088197625939b2137998b0efd59f30b3683093733c1ca4e0a62d638e09f | jq -r '.reports[0].payload'
```

Cartridge scoreboards

```shell
curl -s "http://localhost:8080/inspect/app/scoreboards?cartridge_id=907ab088197625939b2137998b0efd59f30b3683093733c1ca4e0a62d638e09f" | jq -r '.reports[0].payload' | xxd -r -p | jq
```

Cartridge scoreboard score

```shell
curl -s "http://localhost:8080/inspect/app/scores?scoreboard_id=a7a39b72f29718e653e73503210fbb597057b7a1c77d1fe321a1afcff041d4e1" | jq -r '.reports[0].payload' | xxd -r -p | jq
```

indexer queries

```shell
curl -s http://localhost:8080/inspect/cartesapp/indexer_query?tags=score | jq -r '.reports[0].payload' | xxd -r -p
curl -s "http://localhost:8080/inspect/cartesapp/indexer_query?tags=replay&msg_sender=0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266" | jq -r '.reports[0].payload' | xxd -r -p
```

Indexer score from scoreboard

```shell
indexer_result=$(curl -s http://localhost:8080/inspect/cartesapp/indexer_query?tags=score | jq -r '.reports[0].payload' | xxd -r -p | jq)
curl -s -H 'Content-Type: application/json' -X POST "http://localhost:8080/graphql" -d "{ \"query\":\"query { notice(inputIndex:$(echo $indexer_result | jq -r '.[0].input_index'),noticeIndex:$(echo $indexer_result | jq -r '.[0].output_index')) { payload}}\"}}" | jq -r '.data.notice.payload' | sed -r 's/^0x//' | tr -d '\n' | xxd -c 32
```
